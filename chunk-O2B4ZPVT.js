import{d as S}from"./chunk-2SJIRAYA.js";var u=class{constructor(r,t,e,o,s){this.roundsPlayed=r,this.roundsScored=t,this.combatsDone=e,this.combatsWon=o,this.rank=s}roundsPlayed;roundsScored;combatsDone;combatsWon;rank};var m=class{constructor(r,t,e,o,s,a,d){this.rank=r,this.combatsDone=t,this.combatsWon=e,this.roundsPlayed=o,this.roundsScored=s,this.swordplayersCount=a,this.bestSwordplayerRank=d}rank;combatsDone;combatsWon;roundsPlayed;roundsScored;swordplayersCount;bestSwordplayerRank};var f=class n{constructor(){}insertStatsInClans(r,t,e){for(let o=0;o<r.length;o++)r[o].stats=new m(0,0,0,0,0,0,t.length+1);for(let o=0;o<t.length;o++){let s=e[t[o].clan.id];r[s].stats.roundsScored+=t[o].stats.roundsScored,r[s].stats.roundsPlayed+=t[o].stats.roundsPlayed,r[s].stats.combatsWon+=t[o].stats.combatsWon,r[s].stats.combatsDone+=t[o].stats.combatsDone,r[s].stats.swordplayersCount+=1,r[s].stats.bestSwordplayerRank>t[o].stats.rank&&(r[s].stats.bestSwordplayerRank=t[o].stats.rank)}return r}rankClans(r){r.sort(this.orderClansByPerfomance);for(let t=0;t<r.length;t++)r[t].stats.rank=t+1;return r}orderClansByPerfomance(r,t){let e=Number((r.stats.roundsScored/r.stats.swordplayersCount).toFixed(2)),o=Number((t.stats.roundsScored/t.stats.swordplayersCount).toFixed(2));if(e!=o)return o-e;let s=Number((r.stats.roundsPlayed/r.stats.swordplayersCount).toFixed(2)),a=Number((t.stats.roundsPlayed/t.stats.swordplayersCount).toFixed(2));if(s!=a)return a-s;let d=Number((r.stats.combatsWon/r.stats.swordplayersCount).toFixed(2)),b=Number((t.stats.combatsWon/t.stats.swordplayersCount).toFixed(2));if(d!=b)return b-d;let i=Number((r.stats.combatsWon/r.stats.swordplayersCount).toFixed(2)),c=Number((t.stats.combatsWon/t.stats.swordplayersCount).toFixed(2));return i!=c?c-i:t.stats.bestSwordplayerRank-r.stats.bestSwordplayerRank}insertStatsInSwordplayers(r,t,e){for(let o=0;o<r.length;o++)r[o].stats=new u(0,0,0,0,0);for(let o=0;o<t.length;o++){try{let s=e[t[o].swp1.id];r[s].stats.roundsScored+=t[o].roundsScored1,r[s].stats.roundsPlayed+=t[o].roundsScored1+t[o].roundsScored2,r[s].stats.combatsDone+=1,t[o].roundsScored1>t[o].roundsScored2&&(r[s].stats.combatsWon+=1)}catch{}try{let s=e[t[o].swp2.id];r[s].stats.roundsScored+=t[o].roundsScored2,r[s].stats.roundsPlayed+=t[o].roundsScored1+t[o].roundsScored2,r[s].stats.combatsDone+=1,t[o].roundsScored1<t[o].roundsScored2&&(r[s].stats.combatsWon+=1)}catch{}}return r}rankSwordplayers(r){r.sort(this.orderSwordplayersByPerformance);for(let t=0;t<r.length;t++)r[t].stats.rank=t+1;return r}orderSwordplayersByPerformance(r,t){return r.stats.roundsScored!=t.stats.roundsScored?t.stats.roundsScored-r.stats.roundsScored:r.stats.roundsPlayed!=t.stats.roundsPlayed?r.stats.roundsPlayed-t.stats.roundsPlayed:r.stats.combatsWon!=t.stats.combatsWon?t.stats.combatsWon-r.stats.combatsWon:r.stats.combatsDone!=t.stats.combatsDone?r.stats.combatsDone-t.stats.combatsDone:r.id-t.id}static \u0275fac=function(t){return new(t||n)};static \u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"root"})};export{f as a};
