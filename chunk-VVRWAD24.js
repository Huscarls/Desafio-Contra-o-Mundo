import{a as ce}from"./chunk-NNMG3HIQ.js";import{a as j,b as Z}from"./chunk-RLESQ3DH.js";import{a as me}from"./chunk-QIAVNDFQ.js";import{A as w,B as S,C as U,D as I,E as s,Ea as de,F as $,Fa as X,Ga as Y,H as G,K as b,L as h,M as C,O as f,P as y,Q as ae,R as le,T as M,U as z,W as V,X as T,Y as se,e as P,ga as pe,h as c,i as m,ka as oe,m as d,ma as F,n as u,na as O,o as k,oa as D,p as W,pa as A,qa as L,r as g,ra as R,s as v,sa as H,ta as q,u as n,ua as B,v as o,va as J,w as E,x,y as N,ya as K,z as _,za as Q}from"./chunk-OPC2CE5J.js";function be(l,e){if(l&1){let t=_();n(0,"td",9)(1,"button",16),w("click",function(){c(t);let r=S().$implicit,a=S();return m(a.enableSwordplayer(r.id,r.nickname))}),s(2,"Habilitar"),o()()}}function he(l,e){if(l&1){let t=_();n(0,"td")(1,"button",17),w("click",function(){c(t);let r=S().$implicit,a=S();return m(a.disableSwordplayer(r.id,r.nickname))}),s(2,"Desabilitar"),o()()}}function Ce(l,e){if(l&1){let t=_();x(0),n(1,"tr")(2,"td",9),s(3),f(4,"uppercase"),o(),n(5,"td",9),s(6),f(7,"titlecase"),o(),n(8,"td",9)(9,"button",10),w("click",function(){let r=c(t).$implicit,a=S();return m(a.toSwordplayer(r.id))}),s(10),f(11,"titlecase"),o()(),g(12,be,3,0,"td",11)(13,he,3,0,"ng-template",null,0,le),n(15,"td",9)(16,"button",12),w("click",function(){let r=c(t).$implicit,a=S();return m(a.toEditSwordplayer(r.id))}),E(17,"i",13),o()(),n(18,"td",9)(19,"button",14),w("click",function(){let r=c(t).$implicit,a=S();return m(a.deleteSwordplayer(r.id,r.nickname,r.clan.full_name))}),E(20,"i",15),o()()(),N()}if(l&2){let t=e.$implicit,i=I(14);d(3),$(y(4,5,t.clan.abbreviation)),d(3),$(y(7,7,t.full_name)),d(4),$(y(11,9,t.nickname)),d(2),v("ngIf",!t.is_enabled)("ngIfElse",i)}}var ee=class l{constructor(e,t,i,r){this.swpService=e;this.routesService=t;this.authService=i;this.errorService=r}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.refreshData()}subscriptions=new D;swordplayers=[];swpMap={};findSwpValue="";getSwordplayers(){this.subscriptions.add=this.swpService.getAllSwordplayers().subscribe({next:e=>{e.token&&this.authService.updateToken(e.token),this.swordplayers=e.data},complete:()=>this.swpMap=this.swpService.mapSwordplayers(this.swordplayers),error:e=>{this.errorService.handler(e)}})}enableSwordplayer(e,t){window.confirm("Habilitar "+t+"?")&&(this.subscriptions.add=this.swpService.enableSwordplayer(e).subscribe({next:r=>{r.token&&this.authService.updateToken(r.token)},complete:()=>{window.alert(`Swordplayer ${t} ativado!`),this.swordplayers[this.swpMap[e]].is_enabled=!0},error:r=>{this.errorService.handler(r)}}))}disableSwordplayer(e,t){window.confirm("Desabilitar "+t+"?")&&(this.subscriptions.add=this.swpService.disableSwordplayer(e,this.authService.getUserId()).subscribe({next:r=>{r.token&&this.authService.updateToken(r.token)},complete:()=>{window.alert(`Swordplayer ${t} desativado!`),this.swordplayers[this.swpMap[e]].is_enabled=!1},error:r=>{this.errorService.handler(r)}}))}refreshData(){this.getSwordplayers()}toEditSwordplayer(e){this.routesService.navigate.toSwordplayerEdit(e)}toSwordplayer(e){this.routesService.navigate.toSwordplayer(e)}deleteSwordplayer(e,t,i){window.confirm(`Remover ${t} do cl\xE3 ${i} do torneio?`)&&(this.subscriptions.add=this.swpService.deleteSwordplayer(e).subscribe({next:a=>{a.token&&this.authService.updateToken(a.token)},complete:()=>{let a=this.swpMap[e];this.swordplayers.splice(a,1),this.swpMap=this.swpService.mapSwordplayers(this.swordplayers)},error:a=>{this.errorService.handler(a)}}))}static \u0275fac=function(t){return new(t||l)(u(j),u(F),u(O),u(A))};static \u0275cmp=k({type:l,selectors:[["app-swordplayer-list"]],standalone:!1,decls:16,vars:5,consts:[["notEnabled",""],[1,"d-flex","justify-content-around","my-2","p-1","align-items-center"],["type","text","placeholder","Swordplayer ou cl\xE3",1,"form-control","mx-3","text-center",3,"ngModelChange","ngModel"],[3,"refreshData"],[1,"table","table-striped","table-bordered","text-center"],["colspan","1",1,"fs-4"],["colspan","2",1,"fs-4"],["colspan","3",1,"fs-4"],[4,"ngFor","ngForOf"],[1,"align-middle"],[1,"btn","btn-link",3,"click"],["class","align-middle",4,"ngIf","ngIfElse"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-pencil-square"],[1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash-fill"],[1,"btn","btn-outline-success",3,"click"],[1,"btn","btn-outline-warning",3,"click"]],template:function(t,i){t&1&&(n(0,"div",1),E(1,"app-button-back-to-menu"),n(2,"input",2),C("ngModelChange",function(a){return h(i.findSwpValue,a)||(i.findSwpValue=a),a}),o(),n(3,"app-button-refresh-data",3),w("refreshData",function(){return i.refreshData()}),o()(),n(4,"table",4)(5,"thead")(6,"tr")(7,"th",5),s(8,"Cl\xE3"),o(),n(9,"th",6),s(10,"Swordplayer"),o(),n(11,"th",7),s(12,"A\xE7\xF5es"),o()()(),n(13,"tbody"),g(14,Ce,21,11,"ng-container",8),f(15,"findSwordplayer"),o()()),t&2&&(d(2),b("ngModel",i.findSwpValue),d(12),v("ngForOf",ae(15,2,i.swordplayers,i.findSwpValue)))},dependencies:[M,z,L,R,B,me,de,T,V,ce],encapsulation:2})};function Ee(l,e){if(l&1&&(n(0,"option",18),s(1),f(2,"titlecase"),f(3,"uppercase"),o()),l&2){let t=S().$implicit;U("value",t.id),d(),G("",y(2,3,t.full_name)," | ",y(3,5,t.abbreviation),"")}}function xe(l,e){if(l&1&&(x(0),g(1,Ee,4,7,"option",17),N()),l&2){let t=e.$implicit;d(),v("ngIf",t.full_name!="shields")}}var ie=class l{constructor(e,t,i,r,a){this.routesService=e;this.clanServ=t;this.swpServ=i;this.authService=r;this.errorService=a}subscriptions=new D;clans=[];clanId="";swordplayerFullName="";swordplayerNickname="";ngOnInit(){this.getClans()}ngOnDestroy(){this.subscriptions.unsubscribe()}clanInput(e){this.clanId=e}getClans(){this.subscriptions.add=this.clanServ.getAllClans().subscribe({next:e=>{this.clans=e.data,e.token&&this.authService.updateToken(e.token)},error:e=>{this.errorService.handler(e)}})}cleanForm(){this.swordplayerFullName="",this.swordplayerNickname=""}registerSwordplayer(e,t,i){if(!e||!t||!i)return window.alert("Preencha todos os campos");let r=this.authService.getUserId();this.subscriptions.add=this.swpServ.registerSwordplayer(t,i,e,r).subscribe({complete:()=>{window.alert(`Swordplayer ${i} registrado com sucesso`),this.cleanForm()}})}toMenu(){this.routesService.navigate.toMenu()}static \u0275fac=function(t){return new(t||l)(u(F),u(Y),u(j),u(O),u(A))};static \u0275cmp=k({type:l,selectors:[["app-swordplayer-new"]],standalone:!1,decls:28,vars:3,consts:[["idClan",""],[1,"d-flex","flex-column","align-items-center","justify-content-center"],[1,"bg-dark","bg-opacity-75","border","border-3","border","rounded-3","mb-3","p-3","text-center"],[1,"mb-3"],[1,"bg-dark","bg-opacity-75","border","border-3","rounded-3","mb-3","p-3"],[1,"d-flex","flex-column","justify-content-center","mb-3"],["for","idClan",1,"fs-4","mb-2"],["name","idClan","id","idClan",1,"text-center","rounded","p-1",3,"change"],["value","","selected","","disabled",""],[4,"ngFor","ngForOf"],["for","swordplayerFullName",1,"fs-4","mb-2"],["type","text","name","swordplayerFullName","id","swordplayerFullName","placeholder","Ex: Skyler",1,"text-center","rounded",3,"ngModelChange","ngModel"],["for","swordplayerNickname",1,"fs-4","mb-2"],["type","text","name","swordplayerNickname","id","swordplayerNickname","placeholder","Ex: Sky",1,"text-center","rounded",3,"ngModelChange","ngModel"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[3,"value",4,"ngIf"],[3,"value"]],template:function(t,i){if(t&1){let r=_();n(0,"div",1)(1,"div",2)(2,"h1",3),s(3,"Registrar swordplayer"),o()(),n(4,"div",4)(5,"form")(6,"div",5)(7,"label",6),s(8,"Cl\xE3"),o(),n(9,"select",7,0),w("change",function(){c(r);let p=I(10);return m(i.clanInput(p.value))}),n(11,"option",8),s(12,"SELECIONE O CL\xC3"),o(),g(13,xe,2,1,"ng-container",9),o()(),n(14,"div",5)(15,"label",10),s(16,"Nome"),o(),n(17,"input",11),C("ngModelChange",function(p){return c(r),h(i.swordplayerFullName,p)||(i.swordplayerFullName=p),m(p)}),o()(),n(18,"div",5)(19,"label",12),s(20,"Apelido"),o(),n(21,"input",13),C("ngModelChange",function(p){return c(r),h(i.swordplayerNickname,p)||(i.swordplayerNickname=p),m(p)}),o()(),E(22,"hr"),n(23,"div",14)(24,"button",15),w("click",function(){return c(r),m(i.toMenu())}),s(25,"Voltar"),o(),n(26,"button",16),w("click",function(){return c(r),m(i.registerSwordplayer(i.clanId,i.swordplayerFullName,i.swordplayerNickname))}),s(27,"Registrar"),o()()()()()}t&2&&(d(13),v("ngForOf",i.clans),d(4),b("ngModel",i.swordplayerFullName),d(4),b("ngModel",i.swordplayerNickname))},dependencies:[M,z,J,K,Q,L,R,H,B,q,T,V],encapsulation:2})};function Ne(l,e){if(l&1&&(x(0),n(1,"option",15),s(2),f(3,"titlecase"),f(4,"uppercase"),o(),N()),l&2){let t=e.$implicit,i=S();d(),U("value",t.id),v("selected",t.id==i.swordplayer.clan.id),d(),G("",y(3,4,t.full_name)," | ",y(4,6,t.abbreviation),"")}}var re=class l{constructor(e,t,i,r,a,p){this.routesService=e;this.clanServ=t;this.swpServ=i;this.route=r;this.authService=a;this.errorService=p}subscriptions=new D;swpId=0;clans=[];swordplayer;ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.swpId=this.route.snapshot.params.id,this.getSwordplayer(this.swpId),this.getClans()}clanInput(e){this.swordplayer.clan.id=e}getSwordplayer(e){this.subscriptions.add=this.swpServ.getSwordplayerById(e).subscribe({next:t=>{this.swordplayer=t.data,t.token&&this.authService.updateToken(t.token)},error:t=>{this.errorService.handler(t)}})}getClans(){this.subscriptions.add=this.clanServ.getAllClans().subscribe({next:e=>{this.clans=e.data,e.token&&this.authService.updateToken(e.token)},error:e=>{this.errorService.handler(e)}})}updateSwordplayer(){if(!this.swordplayer.clan.id||!this.swordplayer.full_name||!this.swordplayer.nickname)return window.alert("Preencha todos os campos");this.subscriptions.add=this.swpServ.updateSwordplayer(this.swordplayer.id,this.swordplayer.clan.id,this.swordplayer.full_name,this.swordplayer.nickname).subscribe({next:e=>{e.token&&this.authService.updateToken(e.token)},complete:()=>{window.alert(`Swordplayer ${this.swordplayer.nickname} foi atualizado(a)`),this.toSwordplayersList()},error:e=>{this.errorService.handler(e)}})}toSwordplayersList(){this.routesService.navigate.toSwordplayerList()}static \u0275fac=function(t){return new(t||l)(u(F),u(Y),u(j),u(pe),u(O),u(A))};static \u0275cmp=k({type:l,selectors:[["app-swordplayer-edit"]],standalone:!1,decls:24,vars:3,consts:[["idClan",""],[1,"d-flex","flex-column","align-items-center","justify-content-center"],[1,"mb-3"],[1,"bg-dark","bg-opacity-75","border","border-3","border-light","rounded-3","mb-3","p-3"],[1,"d-flex","flex-column","justify-content-center","mb-3"],["for","idClan",1,"fs-4","mb-2"],["name","idClan","id","idClan",1,"text-center","rounded","p-1",3,"change"],[4,"ngFor","ngForOf"],["for","swordplayerFullName",1,"fs-4","mb-2"],["type","text","name","swordplayerFullName","id","swordplayerFullName","placeholder","Ex: Skyler",1,"text-center","rounded",3,"ngModelChange","ngModel"],["for","swordplayerNickname",1,"fs-4","mb-2"],["type","text","name","swordplayerNickname","id","swordplayerNickname","placeholder","Ex: Sky",1,"text-center","rounded",3,"ngModelChange","ngModel"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[3,"selected","value"]],template:function(t,i){if(t&1){let r=_();n(0,"div",1)(1,"h1",2),s(2,"Registrar swordplayer"),o(),n(3,"div",3)(4,"form")(5,"div",4)(6,"label",5),s(7,"Cl\xE3"),o(),n(8,"select",6,0),w("change",function(){c(r);let p=I(9);return m(i.clanInput(p.value))}),g(10,Ne,5,8,"ng-container",7),o()(),n(11,"div",4)(12,"label",8),s(13,"Nome"),o(),n(14,"input",9),C("ngModelChange",function(p){return c(r),h(i.swordplayer.full_name,p)||(i.swordplayer.full_name=p),m(p)}),o()(),n(15,"div",4)(16,"label",10),s(17,"Apelido"),o(),n(18,"input",11),C("ngModelChange",function(p){return c(r),h(i.swordplayer.nickname,p)||(i.swordplayer.nickname=p),m(p)}),o()(),n(19,"div",12)(20,"button",13),w("click",function(){return c(r),m(i.toSwordplayersList())}),s(21,"Voltar"),o(),n(22,"button",14),w("click",function(){return c(r),m(i.updateSwordplayer())}),s(23,"Atualizar"),o()()()()()}t&2&&(d(10),v("ngForOf",i.clans),d(4),b("ngModel",i.swordplayer.full_name),d(4),b("ngModel",i.swordplayer.nickname))},dependencies:[M,J,K,Q,L,R,H,B,q,T,V],encapsulation:2})};var Ie=[{path:"list",component:ee,canActivate:[X,Z]},{path:"new",component:ie,canActivate:[X,Z]},{path:"edit/:id",component:re,canActivate:[X,Z]}],ne=class l{static \u0275fac=function(t){return new(t||l)};static \u0275mod=W({type:l});static \u0275inj=P({imports:[oe.forChild(Ie),oe]})};var _e=class l{static \u0275fac=function(t){return new(t||l)};static \u0275mod=W({type:l});static \u0275inj=P({imports:[se,ne]})};export{_e as SwordplayerModule};
